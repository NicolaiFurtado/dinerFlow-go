# ğŸ½ï¸ Diner Flow â€” Restaurant Management API (Golang + Gin)

Diner Flow is a RESTful API developed in Go using the Gin framework. It provides essential features for managing a restaurantâ€™s backend operations including user authentication, table and item management, order handling, and shift tracking. The system is designed for extensibility and includes thorough automated testing and documentation.

---

## ğŸš€ Features

- âœ… JWT-based user authentication and session handling
- âœ… Table and item CRUD operations
- âœ… Open and manage orders ("tabs")
- âœ… Shift start logic with middleware support
- âœ… Daily closing functionality
- âœ… Swagger for API documentation
- âœ… Postman collection for testing endpoints
- âœ… Unit tests using `sqlmock` and `httptest`

---

## ğŸ§° Tech Stack

- **Go** (v1.20+)
- **Gin** (web framework)
- **MySQL** (DB)
- **sqlmock** (for mocking DB in tests)
- **Swag** (Swagger doc generator)
- **Postman** (API testing)
- **Docker** (optional, for deployment)

---

## ğŸ“¦ Installation & Usage

### 1. Clone the Repository

```bash
git clone https://github.com/YOUR_USERNAME/diner-flow.git
cd diner-flow
```

### 2. Install Dependencies

```bash
go mod tidy
```

### 3. Setup Environment Variables

Create a `.env` file in the root directory with the following content (adjust as needed):

```env
DB_USER=root
DB_PASS=root
DB_HOST=localhost
DB_PORT=3306
DB_NAME=diner-flow
```

---

## ğŸ—ƒï¸ Database Setup

You can use the provided SQL dump to initialize your test database:

```bash
mysql -u root -p diner-flow < database/dump.sql
```

Make sure the database `diner-flow` exists before running the command.

---

## ğŸ§ª Running Tests

Run all unit tests with:

```bash
go test -v ./controllers
```

You should see `PASS` for each test, covering:

- Authentication (SignUp, Login, Logout)
- Shift management
- Items
- Tables
- Tabs (open order)
- Closing day routine

---

## ğŸ“® Postman Collection

You can import the included Postman collection (`docs/postman_collection.json`) into Postman to test all endpoints easily.

Steps:

1. Open Postman.
2. Click **Import**.
3. Select the `postman_collection.json` file.
4. Use the environment variables as needed (e.g., for bearer token).

---

## ğŸ“˜ Swagger Documentation

The API is documented using Swagger.

To generate and view it:

```bash
swag init
```

Then run your app and visit:

```
http://localhost:8080/swagger/index.html
```

---

## ğŸ“ Project Structure

```
.
â”œâ”€â”€ config/             # DB config and .env handling
â”œâ”€â”€ controllers/        # HTTP handlers and business logic
â”œâ”€â”€ models/             # Struct definitions (e.g., User, Tab, Item)
â”œâ”€â”€ utils/              # Helpers for JWT, password hashing, etc.
â”œâ”€â”€ db/migrations/      # SQL schema and migrations
â”œâ”€â”€ docs/               # Swagger & Postman files
â”œâ”€â”€ main.go             # Entry point
â””â”€â”€ README.md           # This file
```

---

## ğŸ§± Example Endpoints

| Method | Endpoint          | Description              |
|--------|-------------------|--------------------------|
| POST   | `/signup`         | User registration        |
| POST   | `/login`          | User login               |
| POST   | `/logout`         | Invalidate session token |
| POST   | `/startShift`     | Start user shift         |
| GET    | `/items`          | List menu items          |
| POST   | `/tab`            | Open new tab             |
| GET    | `/closeDay`       | Finalize and close day   |

---

## ğŸš§ Roadmap

- [x] Full backend logic
- [x] Swagger generation
- [x] Postman collection
- [x] Unit testing
- [ ] Docker containerization
- [ ] GitHub Actions for CI/CD

---

## ğŸ“„ License

This project is licensed under the MIT License.

---

## ğŸ‘¤ Author

**Nicolai Furtado**
[GitHub](https://github.com/NicolaiFurtado)
